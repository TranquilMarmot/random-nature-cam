<!DOCTYPE html>
<html style="height: 100%">
  <head>
    <meta charset="utf-8" />
    <title>Random Nature Stream</title>
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
  </head>

  <body style="height: 100%; margin: 0; overflow: hidden;">
    <script>
      (async () => {
        // 79 refers to "currently-live"
        const camGroupId = 79;
        const timeMillis = new Date().getTime();

        const camGroupResult = await fetch(
          `https://omega.explore.org/api/get_cam_group_info.json?t=${timeMillis}&id=${camGroupId}`
        );

        const camGroup = await camGroupResult.json();

        // only want active feeds
        const activeFeeds = camGroup.data.feeds.filter(
          feed => !feed.is_inactive
        );

        // choose a random one...
        const randomFeed =
          activeFeeds[Math.floor(Math.random() * activeFeeds.length)];

        // and shove it into the page
        document.body.innerHTML = `<iframe src="${
          randomFeed.large_feed_html
        }" frameborder="0" allow="autoplay; encrypted-media" allowfullscreen width="100%" height="100%"></iframe>`;
      })();
    </script>
  </body>
</html>
